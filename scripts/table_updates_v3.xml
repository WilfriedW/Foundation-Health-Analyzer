<?xml version="1.0" encoding="UTF-8"?>
<!-- 
  Table Updates v3 - Add fields for glide_list architecture
  
  Apply these updates to existing tables in ServiceNow:
  
  1. Go to System Definition > Tables
  2. Find each table below
  3. Add the new fields via "New" button in Columns tab
-->
<record_update>
    <!-- 
    ===============================================
    Table: x_1310794_founda_0_verification_items
    New Fields: is_template, template_category
    ===============================================
    -->
    <sys_dictionary action="INSERT_OR_UPDATE">
        <element>is_template</element>
        <table>x_1310794_founda_0_verification_items</table>
        <column_label>Is Template</column_label>
        <internal_type>boolean</internal_type>
        <default_value>false</default_value>
        <mandatory>false</mandatory>
        <max_length>40</max_length>
        <active>true</active>
        <read_only>false</read_only>
        <comments>
            Indicates if this Verification Item is a template (reusable) or an instance (linked to a specific configuration).
            Templates are cloned when creating configurations from templates.
        </comments>
    </sys_dictionary>
    
    <sys_dictionary action="INSERT_OR_UPDATE">
        <element>template_category</element>
        <table>x_1310794_founda_0_verification_items</table>
        <column_label>Template Category</column_label>
        <internal_type>string</internal_type>
        <max_length>100</max_length>
        <mandatory>false</mandatory>
        <active>true</active>
        <read_only>false</read_only>
        <comments>
            Optional category for template organization (e.g., "security", "performance", "quality").
            Helps filter and organize VI templates in UI.
        </comments>
    </sys_dictionary>
    
    <!-- 
    ===============================================
    Table: x_1310794_founda_0_analysis_templates
    New Field: verification_items (glide_list)
    ===============================================
    -->
    <sys_dictionary action="INSERT_OR_UPDATE">
        <element>verification_items</element>
        <table>x_1310794_founda_0_analysis_templates</table>
        <column_label>Verification Items</column_label>
        <internal_type>glide_list</internal_type>
        <reference>x_1310794_founda_0_verification_items</reference>
        <mandatory>false</mandatory>
        <active>true</active>
        <read_only>false</read_only>
        <comments>
            List of Verification Item templates included in this Analysis Template.
            When creating a configuration from this template, these VIs will be cloned.
            Use Ctrl+Click to select multiple items.
        </comments>
    </sys_dictionary>
</record_update>

<!-- 
MANUAL STEPS IN SERVICENOW:

1. Add Field: is_template (boolean)
   - Table: x_1310794_founda_0_verification_items
   - Type: True/False
   - Label: Is Template
   - Default: false

2. Add Field: template_category (string)
   - Table: x_1310794_founda_0_verification_items
   - Type: String
   - Label: Template Category
   - Max Length: 100

3. Add Field: verification_items (glide_list)
   - Table: x_1310794_founda_0_analysis_templates
   - Type: List
   - Reference: x_1310794_founda_0_verification_items
   - Label: Verification Items

4. (Optional) Remove fields if you ran v2:
   - Remove template_rules table (if created)
   - Remove base_query field from analysis_templates (deprecated)
-->
