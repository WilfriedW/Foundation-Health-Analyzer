<?xml version="1.0" encoding="UTF-8"?><record_update table="sp_widget">
    <sp_widget action="DELETE">
        <category>custom</category>
        <client_script><![CDATA[api.controller = function($scope, spUtil) {
    $scope.tableName = '';
    $scope.fields = [];
    $scope.loading = false;
    $scope.error = null;

    // Initialiser $scope.server pour appeler le REST Message
    $scope.server = {
        get: function(params) {
            return spUtil.getRESTMessage('Foundation Health Analyzer API', params, {
                path: '/api/x_1310794_founda_0/fha'
            }).then(function(response) {
                return response;
            });
        }
    };

    $scope.loadFields = function() {
        if (!$scope.tableName) {
            $scope.error = "Table name is required";
            console.log("Table name is required");
            return;
        }

        $scope.loading = true;
        $scope.error = null;
        console.log("Loading fields for table: " + $scope.tableName);

        $scope.server.get({
            action: 'getFields',
            tableName: $scope.tableName
        }).then(function(response) {
            console.log("Response received:", response);

            $scope.loading = false;

            if (response.data.success) {
                console.log("Fields loaded successfully:", response.data.fields);
                $scope.fields = response.data.fields || [];
            } else {
                console.log("Error loading fields:", response.data.error);
                $scope.error = response.data.error;
            }
        }).catch(function(error) {
            console.log("Error in loadFields:", error);
            $scope.error = "Failed to load fields: " + error.data.error;
            $scope.loading = false;
        });
    };
};
]]></client_script>
        <controller_as>c</controller_as>
        <css/>
        <data_table>sp_instance</data_table>
        <demo_data/>
        <description/>
        <docs/>
        <field_list/>
        <has_preview>false</has_preview>
        <id>fha_custom_fields_viewer</id>
        <internal>false</internal>
        <link><![CDATA[function link(scope, element, attrs, controller) {
  
}]]></link>
        <name>FHA Custom Fields Viewer</name>
        <option_schema/>
        <public>false</public>
        <roles/>
        <script><![CDATA[(function() {
   /* try {
        // Récupérer les paramètres du client (si nécessaire)
        var tableName = data.tableName; // Par exemple, passé depuis le client

        // Créer et exécuter le REST Message
        var r = new sn_ws.RESTMessageV2('Foundation Health Analyzer API', 'getFields'); // Remplacez par le nom de votre REST Message
        r.setHttpMethod('GET'); // Ou 'POST', 'PUT', etc.
        r.setRequestHeader('Accept', 'application/json');

        // Ajouter des paramètres si nécessaire
        if (tableName) {
            r.setQueryParameter('tableName', tableName);
        }

        // Exécuter la requête
        var response = r.execute();
        var responseBody = r.getBody();
        var responseObj = JSON.parse(responseBody);

        // Préparer les données pour le client
        data.success = true;
        data.fields = responseObj.fields; // Remplacez 'fields' par le bon champ de votre réponse

    } catch (ex) {
        data.success = false;
        data.error = ex.message;
    }*/
})();
]]></script>
        <servicenow>false</servicenow>
        <sys_class_name>sp_widget</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2026-01-03 07:26:21</sys_created_on>
        <sys_id>6ef73b088396721083e1b4a6feaad3d0</sys_id>
        <sys_mod_count>13</sys_mod_count>
        <sys_name>FHA Custom Fields Viewer</sys_name>
        <sys_package display_value="Foundation Health Analyzer" source="x_1310794_founda_0">d852994c8312321083e1b4a6feaad3e6</sys_package>
        <sys_policy/>
        <sys_scope display_value="Foundation Health Analyzer">d852994c8312321083e1b4a6feaad3e6</sys_scope>
        <sys_update_name>sp_widget_6ef73b088396721083e1b4a6feaad3d0</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2026-01-03 08:25:52</sys_updated_on>
        <template><![CDATA[<div class="panel panel-default">
    <div class="panel-heading">
        <h4>Custom Fields Explorer</h4>
    </div>

    <div class="panel-body">

        <!-- Sélection de la table -->
        <div class="form-group">
            <label>Table name</label>
            <input type="text"
                   class="form-control"
                   placeholder="ex: core_company"
                   ng-model="tableName"
                   ng-change="loadFields()" />
        </div>

        <!-- Indicateur de chargement -->
        <div ng-if="loading" class="text-info">
            Loading fields...
        </div>

        <!-- Affichage des erreurs -->
        <div ng-if="error" class="alert alert-danger">
            {{error}}
        </div>

        <!-- Affichage des champs -->
        <div ng-if="fields.length > 0">
            <h5>Custom Fields ({{fields.length}})</h5>
            <table class="table table-striped table-hover">
                <thead>
                    <tr>
                        <th>Name</th>
                        <th>Label</th>
                        <th>Type</th>
                        <th>Mandatory</th>
                        <th>Max Length</th>
                        <th>Reference</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="field in fields">
                        <td>{{field.name}}</td>
                        <td>{{field.label}}</td>
                        <td>{{field.type}}</td>
                        <td>{{field.mandatory ? 'Yes' : 'No'}}</td>
                        <td>{{field.max_length}}</td>
                        <td>{{field.reference || '-'}}</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Message si aucun champ trouvé -->
        <div ng-if="fields.length === 0 && !loading && !error" class="alert alert-info">
            No custom fields found for this table.
        </div>
    </div>
</div>
]]></template>
    </sp_widget>
    <sys_update_version action="INSERT_OR_UPDATE">
        <action>DELETE</action>
        <application display_value="Foundation Health Analyzer">d852994c8312321083e1b4a6feaad3e6</application>
        <file_path/>
        <instance_id>615a31611b9ab59ce84d2f8dee4bcb52</instance_id>
        <instance_name>dev203401</instance_name>
        <name>sp_widget_6ef73b088396721083e1b4a6feaad3d0</name>
        <payload>&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;record_update table="sp_widget"&gt;&lt;sp_widget action="INSERT_OR_UPDATE"&gt;&lt;category&gt;custom&lt;/category&gt;&lt;client_script&gt;&lt;![CDATA[api.controller = function($scope, spUtil) {
    $scope.tableName = '';
    $scope.fields = [];
    $scope.loading = false;
    $scope.error = null;

    // Initialiser $scope.server pour appeler le REST Message
    $scope.server = {
        get: function(params) {
            return spUtil.getRESTMessage('Foundation Health Analyzer API', params, {
                path: '/api/x_1310794_founda_0/fha'
            }).then(function(response) {
                return response;
            });
        }
    };

    $scope.loadFields = function() {
        if (!$scope.tableName) {
            $scope.error = "Table name is required";
            console.log("Table name is required");
            return;
        }

        $scope.loading = true;
        $scope.error = null;
        console.log("Loading fields for table: " + $scope.tableName);

        $scope.server.get({
            action: 'getFields',
            tableName: $scope.tableName
        }).then(function(response) {
            console.log("Response received:", response);

            $scope.loading = false;

            if (response.data.success) {
                console.log("Fields loaded successfully:", response.data.fields);
                $scope.fields = response.data.fields || [];
            } else {
                console.log("Error loading fields:", response.data.error);
                $scope.error = response.data.error;
            }
        }).catch(function(error) {
            console.log("Error in loadFields:", error);
            $scope.error = "Failed to load fields: " + error.data.error;
            $scope.loading = false;
        });
    };
};
]]&gt;&lt;/client_script&gt;&lt;controller_as&gt;c&lt;/controller_as&gt;&lt;css/&gt;&lt;data_table&gt;sp_instance&lt;/data_table&gt;&lt;demo_data/&gt;&lt;description/&gt;&lt;docs/&gt;&lt;field_list/&gt;&lt;has_preview&gt;false&lt;/has_preview&gt;&lt;id&gt;fha_custom_fields_viewer&lt;/id&gt;&lt;internal&gt;false&lt;/internal&gt;&lt;link&gt;&lt;![CDATA[function link(scope, element, attrs, controller) {
  
}]]&gt;&lt;/link&gt;&lt;name&gt;FHA Custom Fields Viewer&lt;/name&gt;&lt;option_schema/&gt;&lt;public&gt;false&lt;/public&gt;&lt;roles/&gt;&lt;script&gt;&lt;![CDATA[(function() {
   /* try {
        // Récupérer les paramètres du client (si nécessaire)
        var tableName = data.tableName; // Par exemple, passé depuis le client

        // Créer et exécuter le REST Message
        var r = new sn_ws.RESTMessageV2('Foundation Health Analyzer API', 'getFields'); // Remplacez par le nom de votre REST Message
        r.setHttpMethod('GET'); // Ou 'POST', 'PUT', etc.
        r.setRequestHeader('Accept', 'application/json');

        // Ajouter des paramètres si nécessaire
        if (tableName) {
            r.setQueryParameter('tableName', tableName);
        }

        // Exécuter la requête
        var response = r.execute();
        var responseBody = r.getBody();
        var responseObj = JSON.parse(responseBody);

        // Préparer les données pour le client
        data.success = true;
        data.fields = responseObj.fields; // Remplacez 'fields' par le bon champ de votre réponse

    } catch (ex) {
        data.success = false;
        data.error = ex.message;
    }*/
})();
]]&gt;&lt;/script&gt;&lt;servicenow&gt;false&lt;/servicenow&gt;&lt;sys_class_name&gt;sp_widget&lt;/sys_class_name&gt;&lt;sys_created_by&gt;admin&lt;/sys_created_by&gt;&lt;sys_created_on&gt;2026-01-03 07:26:21&lt;/sys_created_on&gt;&lt;sys_id&gt;6ef73b088396721083e1b4a6feaad3d0&lt;/sys_id&gt;&lt;sys_mod_count&gt;13&lt;/sys_mod_count&gt;&lt;sys_name&gt;FHA Custom Fields Viewer&lt;/sys_name&gt;&lt;sys_package display_value="Foundation Health Analyzer" source="x_1310794_founda_0"&gt;d852994c8312321083e1b4a6feaad3e6&lt;/sys_package&gt;&lt;sys_policy/&gt;&lt;sys_scope display_value="Foundation Health Analyzer"&gt;d852994c8312321083e1b4a6feaad3e6&lt;/sys_scope&gt;&lt;sys_update_name&gt;sp_widget_6ef73b088396721083e1b4a6feaad3d0&lt;/sys_update_name&gt;&lt;sys_updated_by&gt;admin&lt;/sys_updated_by&gt;&lt;sys_updated_on&gt;2026-01-03 08:25:52&lt;/sys_updated_on&gt;&lt;template&gt;&lt;![CDATA[&lt;div class="panel panel-default"&gt;
    &lt;div class="panel-heading"&gt;
        &lt;h4&gt;Custom Fields Explorer&lt;/h4&gt;
    &lt;/div&gt;

    &lt;div class="panel-body"&gt;

        &lt;!-- Sélection de la table --&gt;
        &lt;div class="form-group"&gt;
            &lt;label&gt;Table name&lt;/label&gt;
            &lt;input type="text"
                   class="form-control"
                   placeholder="ex: core_company"
                   ng-model="tableName"
                   ng-change="loadFields()" /&gt;
        &lt;/div&gt;

        &lt;!-- Indicateur de chargement --&gt;
        &lt;div ng-if="loading" class="text-info"&gt;
            Loading fields...
        &lt;/div&gt;

        &lt;!-- Affichage des erreurs --&gt;
        &lt;div ng-if="error" class="alert alert-danger"&gt;
            {{error}}
        &lt;/div&gt;

        &lt;!-- Affichage des champs --&gt;
        &lt;div ng-if="fields.length &gt; 0"&gt;
            &lt;h5&gt;Custom Fields ({{fields.length}})&lt;/h5&gt;
            &lt;table class="table table-striped table-hover"&gt;
                &lt;thead&gt;
                    &lt;tr&gt;
                        &lt;th&gt;Name&lt;/th&gt;
                        &lt;th&gt;Label&lt;/th&gt;
                        &lt;th&gt;Type&lt;/th&gt;
                        &lt;th&gt;Mandatory&lt;/th&gt;
                        &lt;th&gt;Max Length&lt;/th&gt;
                        &lt;th&gt;Reference&lt;/th&gt;
                    &lt;/tr&gt;
                &lt;/thead&gt;
                &lt;tbody&gt;
                    &lt;tr ng-repeat="field in fields"&gt;
                        &lt;td&gt;{{field.name}}&lt;/td&gt;
                        &lt;td&gt;{{field.label}}&lt;/td&gt;
                        &lt;td&gt;{{field.type}}&lt;/td&gt;
                        &lt;td&gt;{{field.mandatory ? 'Yes' : 'No'}}&lt;/td&gt;
                        &lt;td&gt;{{field.max_length}}&lt;/td&gt;
                        &lt;td&gt;{{field.reference || '-'}}&lt;/td&gt;
                    &lt;/tr&gt;
                &lt;/tbody&gt;
            &lt;/table&gt;
        &lt;/div&gt;

        &lt;!-- Message si aucun champ trouvé --&gt;
        &lt;div ng-if="fields.length === 0 &amp;&amp; !loading &amp;&amp; !error" class="alert alert-info"&gt;
            No custom fields found for this table.
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
]]&gt;&lt;/template&gt;&lt;/sp_widget&gt;&lt;/record_update&gt;</payload>
        <payload_hash>-993913256</payload_hash>
        <record_name>FHA Custom Fields Viewer</record_name>
        <reverted_from/>
        <source>d852d94c8312321083e1b4a6feaad3bf</source>
        <source_table>sys_update_set</source_table>
        <state>previous</state>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2026-01-03 08:25:52</sys_created_on>
        <sys_id>b5b54854831a721083e1b4a6feaad318</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_recorded_at>19b82f682e10000001</sys_recorded_at>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2026-01-03 08:25:52</sys_updated_on>
        <type>Widget</type>
        <update_guid>b5b54854051a72107865e25276c0d817</update_guid>
        <update_guid_history>b5b54854051a72107865e25276c0d817:-993913256,7e454cd86ed67210cb645021442907e3:-1078561811,0c154414891a7210975dccc6b17b7320:-1228365617,b07484502f1a72105b222a6463b3e52b:-568339945,c4a34450b41a7210679ac8814792b038:288336588,a9014cd80cd67210bc3f63da0ed0a7f3:-127227167,e88e7b4426d672101abe673ce9f2b7a1:-1250621088,1cfab78cd99672109428622dc8b18883:1971900102,4fba374cc296721037b236c19ae91cbe:810187702,7cf9770cf4967210aa92aa3711c2e194:-150283708,1e197f884f967210bc5ca4618057d242:-468014380,7ce8378826967210547bf5a2c0a0dd34:-69429573,e228bf08869672102769c11602368bdc:-1259605739,02187b08ed967210d92319e7617e9ad1:798149200</update_guid_history>
    </sys_update_version>
    <sys_metadata_delete action="INSERT_OR_UPDATE">
        <sys_audit_delete display_value="FHA Custom Fields Viewer">e3cc87108352f21083e1b4a6feaad3e0</sys_audit_delete>
        <sys_class_name>sys_metadata_delete</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2026-01-03 22:55:42</sys_created_on>
        <sys_db_object display_value="" name="sp_widget">sp_widget</sys_db_object>
        <sys_id>10c4a62767464c308e8e5eb2ee784669</sys_id>
        <sys_metadata>6ef73b088396721083e1b4a6feaad3d0</sys_metadata>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>FHA Custom Fields Viewer</sys_name>
        <sys_package display_value="Foundation Health Analyzer" source="x_1310794_founda_0">d852994c8312321083e1b4a6feaad3e6</sys_package>
        <sys_parent/>
        <sys_policy/>
        <sys_scope display_value="Foundation Health Analyzer">d852994c8312321083e1b4a6feaad3e6</sys_scope>
        <sys_scope_delete display_value="">459c20c5891043079673a2edc4dc74b1</sys_scope_delete>
        <sys_update_name>sp_widget_6ef73b088396721083e1b4a6feaad3d0</sys_update_name>
        <sys_update_version display_value="sp_widget_6ef73b088396721083e1b4a6feaad3d0">b5b54854831a721083e1b4a6feaad318</sys_update_version>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2026-01-03 22:55:42</sys_updated_on>
    </sys_metadata_delete>
</record_update>
