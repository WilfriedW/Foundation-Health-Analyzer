<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_script_include">
    <sys_script_include action="INSERT_OR_UPDATE">
        <access>package_private</access>
        <active>true</active>
        <api_name>x_1310794_founda_0.FHAUtils</api_name>
        <caller_access/>
        <client_callable>false</client_callable>
        <description>Builds default metadata for verification items (color/icon/name/type)</description>
        <mobile_callable>false</mobile_callable>
        <name>FHAUtils</name>
        <sandbox_callable>false</sandbox_callable>
        <script><![CDATA[var FHAUtils = Class.create();
FHAUtils.prototype = {
    initialize: function() {},

    /**
     * Build metadata JSON for a verification item GlideRecord.
     * Ensures displayName, record_type, icon, color are present.
     * Deterministic (hash-based) to keep visual stability.
     */
    build: function(itemGr) {
        var meta = {};
        try {
            if (itemGr.metadata) {
                meta = JSON.parse(itemGr.metadata);
            }
        } catch (e) {
            meta = {};
        }

        var key = (itemGr.name + '') ||
                  (itemGr.table && itemGr.table.name + '') ||
                  (itemGr.table + '') ||
                  (itemGr.category + '') ||
                  'item';

        var palette = ['#0c63d4','#6f42c1','#d97706','#0f766e','#be185d','#4338ca','#2563eb','#dc2626','#16a34a'];
        var icons = ['fa-clock','fa-cog','fa-plug','fa-shield','fa-code','fa-database','fa-bolt','fa-magic','fa-tags'];

        var hash = 0;
        for (var i = 0; i < key.length; i++) {
            hash = (hash + key.charCodeAt(i)) % 997;
        }

        if (!meta.record_type) meta.record_type = (itemGr.table && itemGr.table.name + '') || (itemGr.table + '') || 'record';
        if (!meta.displayName) meta.displayName = (itemGr.name + '') || ((itemGr.category + '') + ' item');
        if (!meta.icon) meta.icon = icons[hash % icons.length];
        if (!meta.color) meta.color = palette[hash % palette.length];

        return JSON.stringify(meta);
    },

    type: 'FHAUtils'
};]]></script>
        <sys_class_name>sys_script_include</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2026-01-13 20:45:00</sys_created_on>
        <sys_id>aaaafeed53163610c7233ee0a0490abc</sys_id>
        <sys_mod_count>1</sys_mod_count>
        <sys_name>FHAUtils</sys_name>
        <sys_package display_value="Foundation Health Analyzer" source="x_1310794_founda_0">d852994c8312321083e1b4a6feaad3e6</sys_package>
        <sys_policy>read</sys_policy>
        <sys_scope display_value="Foundation Health Analyzer">d852994c8312321083e1b4a6feaad3e6</sys_scope>
        <sys_update_name>sys_script_include_aaaafeed53163610c7233ee0a0490abc</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2026-01-13 18:24:07</sys_updated_on>
    </sys_script_include>
</record_update>
