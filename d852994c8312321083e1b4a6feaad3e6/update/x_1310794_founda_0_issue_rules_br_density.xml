<?xml version="1.0" encoding="UTF-8"?><record_update table="x_1310794_founda_0_issue_rules">
    <x_1310794_founda_0_issue_rules action="INSERT_OR_UPDATE">
        <active>true</active>
        <code>BR_DENSITY</code>
        <default_severity>medium</default_severity>
        <description>Handler agrégé pour détecter trop de Business Rules sur une table. Utilisez params {"threshold": 30} pour définir la limite.</description>
        <name>Too Many Business Rules</name>
        <params>{"threshold":30}</params>
        <script><![CDATA[var count = context && context.totalCount;
var threshold = params.threshold || 0;

if (!context) context = {};
if (!context._aggregateIssuesFired) context._aggregateIssuesFired = {};
var key = 'br_density_' + rule.code;
if (context._aggregateIssuesFired[key]) return issues;

if (threshold && count > threshold) {
    context._aggregateIssuesFired[key] = true;
    
    var tableName = item.table || 'sys_script';
    var tableValue = item.values && item.values.collection ? item.values.collection : 'unknown';
    
    var message = 'Trop de Business Rules (' + count + ' > ' + threshold + ') - Table: ' + tableValue + '. Cliquez pour voir toutes les Business Rules actives et envisagez de les consolider pour améliorer les performances.';
    
    issues.push({
        code: rule.code,
        message: message,
        severity: rule.severity || 'medium',
        details: {
            count: count,
            threshold: threshold,
            table: tableValue,
            record_table: 'sys_script',
            record_filter: 'collection=' + tableValue + '^active=true',
            record_name: 'Voir ' + count + ' Business Rules'
        }
    });
}]]></script>
        <severity>medium</severity>
        <sys_class_name>x_1310794_founda_0_issue_rules</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2026-01-18 12:00:00</sys_created_on>
        <sys_id>aaaa0004feed53163610c7233ee0a049</sys_id>
        <sys_mod_count>0</sys_mod_count>
        <sys_name>Too Many Business Rules</sys_name>
        <sys_package display_value="Foundation Health Analyzer" source="x_1310794_founda_0">d852994c8312321083e1b4a6feaad3e6</sys_package>
        <sys_policy>read</sys_policy>
        <sys_scope display_value="Foundation Health Analyzer">d852994c8312321083e1b4a6feaad3e6</sys_scope>
        <sys_update_name>x_1310794_founda_0_issue_rules_aaaa0004feed53163610c7233ee0a049</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2026-01-18 12:00:00</sys_updated_on>
        <type>br_density</type>
    </x_1310794_founda_0_issue_rules>
</record_update>
